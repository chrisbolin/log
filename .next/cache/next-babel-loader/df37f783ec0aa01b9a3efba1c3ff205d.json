{"ast":null,"code":"const path = require(\"path\");\n\nconst fs = require(\"fs\").promises;\n\nconst marked = require(\"marked\");\n\nfunction getDate(filename) {\n  const [year, month, day] = filename.split(\".\")[0].split(\"-\");\n  return `${year}-${month}-${day}T12:00:00.000Z`;\n}\n\nasync function mapArrayAsync(array, callback) {\n  const resultingArray = [];\n\n  for (let index = 0; index < array.length; index++) {\n    resultingArray.push(await callback(array[index], index, array));\n  }\n\n  return resultingArray;\n}\n\nexport async function makeEntries() {\n  const entriesDir = path.join(process.cwd(), \"entries\");\n  const filepaths = (await fs.readdir(entriesDir)).sort().reverse();\n  const entries = await mapArrayAsync(filepaths, filepath => makeEntry(filepath, entriesDir));\n  return entries;\n}\nexport async function makeEntry(filename, directory) {\n  const filepath = path.join(directory, filename);\n  const raw = await fs.readFile(filepath, {\n    encoding: \"utf-8\"\n  });\n  const html = marked(raw);\n  const date = getDate(filename);\n  return {\n    html,\n    date\n  };\n}","map":null,"metadata":{},"sourceType":"module"}